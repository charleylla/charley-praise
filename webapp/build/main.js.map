{"version":3,"sources":["../src/main.js"],"names":["Praise","box","palm","maxCount","_praiseCount","_init","bindEvents","bind","clickHander","callCollection","console","log","updatePraiseNum","e","count","_disableFlag","_countFlag","className","numberEle","createPraiseNumberElement","appendChild","setTimeout","axios","get","then","data","catch","err","element","removeElement","addEventListener","document","createElement","innerHTML","ele","parentElement","removeChild"],"mappings":";;;;;;;;;;AAAA;;;;IAIqBA,M;AACjB,oBAAYC,GAAZ,EAAgBC,IAAhB,EAAqBC,QAArB,EAA8B;AAAA;;AAC1B,aAAKF,GAAL,GAAWA,GAAX;AACA,aAAKC,IAAL,GAAYA,IAAZ;AACA,aAAKC,QAAL,GAAgBA,QAAhB;AACA,aAAKC,YAAL,GAAoB,CAApB;AACA,aAAKC,KAAL;AACA,aAAKC,UAAL;AACH;;;;gCAEM;AACH,iBAAKA,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACA,iBAAKC,WAAL,GAAmB,qBAAS,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAT,EAAqC,GAArC,CAAnB;AACA,iBAAKE,cAAL,GAAsB,KAAKA,cAAL,CAAoBF,IAApB,CAAyB,IAAzB,CAAtB;AACH;;;gCAEM;AACH,cAAE,KAAKH,YAAP;AACA;;;;AAIA,gBAAG,KAAKA,YAAL,KAAsB,KAAKD,QAA9B,EAAuC;AACnCO,wBAAQC,GAAR,CAAY,KAAKP,YAAjB;AACA,qBAAKA,YAAL,GAAoB,CAApB;AACA,uBAAO,CAAC,CAAD,EAAG,CAAH,CAAP;AACH;AACD,iBAAKQ,eAAL;AACAF,oBAAQC,GAAR,CAAY,KAAKP,YAAjB;AACA,mBAAO,CAAC,CAAD,EAAG,CAAH,CAAP;AACH;;;oCAEWS,C,EAAE;AAAA;;AAAA,yBAC0B,KAAKC,KAAL,EAD1B;AAAA;AAAA,gBACFC,YADE;AAAA,gBACYC,UADZ;;AAEV,gBAAGD,YAAH,EAAgB;AACZ,qBAAKd,GAAL,CAASgB,SAAT,GAAqB,SAArB;AACH,aAFD,MAEK;AACD,qBAAKhB,GAAL,CAASgB,SAAT,GAAmB,EAAnB;AACH;;AAED,gBAAGD,UAAH,EAAc;AACV,oBAAME,YAAYC,2BAAlB;AACA,qBAAKlB,GAAL,CAASmB,WAAT,CAAqBF,SAArB;AACAG,2BAAW,YAAI;AACXH,8BAAUD,SAAV,GAAsB,oBAAtB;AACA,0BAAKR,cAAL,CAAoBS,SAApB;AACH,iBAHD,EAGE,EAHF;AAIH;AACJ;;;0CAEgB;AACbI,kBAAMC,GAAN,CAAU,oCAAV,EAAgDC,IAAhD,CAAqD,gBAAQ;AACzDd,wBAAQC,GAAR,CAAYc,IAAZ;AACH,aAFD,EAEGC,KAFH,CAES,eAAO;AACZhB,wBAAQC,GAAR,CAAYgB,GAAZ;AACH,aAJD;AAKH;;;uCAEcC,O,EAAQ;AAAA;;AACnBP,uBAAW,YAAI;AACXQ,8BAAcD,OAAd,EAAsB,OAAK3B,GAA3B;AACH,aAFD,EAEE,IAFF;AAGH;;;qCAEW;AACR,iBAAKC,IAAL,CAAU4B,gBAAV,CAA2B,SAA3B,EAAqC,KAAKtB,WAA1C;AACH;;;;;;kBAlEgBR,M;;;AAqErB,SAASmB,yBAAT,GAAoC;AAChC,QAAMlB,MAAM8B,SAASC,aAAT,CAAuB,KAAvB,CAAZ;AACA/B,QAAIgB,SAAJ,GAAgB,QAAhB;AACAhB,QAAIgC,SAAJ,GAAgB,IAAhB;AACA,WAAOhC,GAAP;AACH;;AAED,SAAS4B,aAAT,CAAuBK,GAAvB,EAA2BC,aAA3B,EAAyC;AACrCA,kBAAcC,WAAd,CAA0BF,GAA1B;AACAA,UAAM,IAAN;AACH","file":"main.js","sourcesContent":["import {\n    throttle,\n} from \"./utils.js\";\n\nexport default class Praise{\n    constructor(box,palm,maxCount){\n        this.box = box;\n        this.palm = palm;\n        this.maxCount = maxCount;\n        this._praiseCount = 0;\n        this._init();\n        this.bindEvents();\n    }\n    \n    _init(){\n        this.bindEvents = this.bindEvents.bind(this)\n        this.clickHander = throttle(this.clickHander.bind(this),500);\n        this.callCollection = this.callCollection.bind(this)\n    }\n\n    count(){\n        ++this._praiseCount;\n        /**\n         * 数组第一项用来控制手掌是否置灰（1表示置灰，0表示不置灰）\n         * 数组第二项用来控制是否显示+1（1表示显示，0表示不显示）\n         */\n        if(this._praiseCount === this.maxCount){\n            console.log(this._praiseCount)\n            this._praiseCount = 0;\n            return [1,1];\n        }\n        this.updatePraiseNum();\n        console.log(this._praiseCount)\n        return [0,1];\n    }\n    \n    clickHander(e){\n        const [ _disableFlag, _countFlag] = this.count();\n        if(_disableFlag){\n            this.box.className = \"disable\";\n        }else{\n            this.box.className=\"\";\n        }\n\n        if(_countFlag){\n            const numberEle = createPraiseNumberElement();\n            this.box.appendChild(numberEle);\n            setTimeout(()=>{\n                numberEle.className = \"number number-move\";\n                this.callCollection(numberEle);\n            },50);\n        }\n    }\n\n    updatePraiseNum(){\n        axios.get(\"http://localhost:8080/index/update\").then(data => {\n            console.log(data)\n        }).catch(err => {\n            console.log(err)\n        });\n    }\n\n    callCollection(element){\n        setTimeout(()=>{\n            removeElement(element,this.box);\n        },1000)\n    }\n\n    bindEvents(){\n        this.palm.addEventListener(\"mouseup\",this.clickHander)\n    }\n}\n\nfunction createPraiseNumberElement(){\n    const box = document.createElement(\"div\");\n    box.className = \"number\";\n    box.innerHTML = \"+1\";\n    return box;\n}\n\nfunction removeElement(ele,parentElement){\n    parentElement.removeChild(ele);\n    ele = null;\n}\n\n"]}