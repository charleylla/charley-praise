{"version":3,"sources":["src/main.js","src/utils.js"],"names":[],"mappings":";;;;;;;;;;AAAA;;;;IAIqB,M;AACjB,oBAAY,GAAZ,EAAgB,IAAhB,EAAqB,QAArB,EAA8B;AAAA;;AAC1B,aAAK,GAAL,GAAW,GAAX;AACA,aAAK,IAAL,GAAY,IAAZ;AACA,aAAK,QAAL,GAAgB,QAAhB;AACA,aAAK,YAAL,GAAoB,CAApB;AACA,aAAK,KAAL;AACA,aAAK,UAAL;AACH;;;;gCAEM;AACH,iBAAK,UAAL,GAAkB,KAAK,UAAL,CAAgB,IAAhB,CAAqB,IAArB,CAAlB;AACA,iBAAK,WAAL,GAAmB,qBAAS,KAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB,CAAT,EAAqC,GAArC,CAAnB;AACA,iBAAK,cAAL,GAAsB,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAAtB;AACH;;;gCAEM;AACH,cAAE,KAAK,YAAP;AACA;;;;AAIA,gBAAG,KAAK,YAAL,KAAsB,KAAK,QAA9B,EAAuC;AACnC,qBAAK,YAAL,GAAoB,CAApB;AACA,uBAAO,CAAC,CAAD,EAAG,CAAH,CAAP;AACH;;AAED,gBAAG,KAAK,YAAL,GAAoB,KAAK,QAA5B,EAAqC;AACjC,qBAAK,YAAL,GAAoB,CAApB;AACA,uBAAO,CAAC,CAAD,EAAG,CAAH,CAAP;AACH;AACD,oBAAQ,GAAR,CAAY,KAAK,YAAjB;AACA,mBAAO,CAAC,CAAD,EAAG,CAAH,CAAP;AACH;;;oCAEW,C,EAAE;AAAA;;AAAA,yBAC0B,KAAK,KAAL,EAD1B;AAAA;AAAA,gBACF,YADE;AAAA,gBACY,UADZ;;AAEV,gBAAG,YAAH,EAAgB;AACZ,qBAAK,GAAL,CAAS,SAAT,GAAqB,SAArB;AACH,aAFD,MAEK;AACD,qBAAK,GAAL,CAAS,SAAT,GAAmB,EAAnB;AACH;;AAED,gBAAG,UAAH,EAAc;AACV,oBAAM,YAAY,2BAAlB;AACA,qBAAK,GAAL,CAAS,WAAT,CAAqB,SAArB;AACA,2BAAW,YAAI;AACX,8BAAU,SAAV,GAAsB,oBAAtB;AACA,0BAAK,cAAL,CAAoB,SAApB;AACH,iBAHD,EAGE,EAHF;AAIH;AACJ;;;uCAEc,O,EAAQ;AAAA;;AACnB,uBAAW,YAAI;AACX,8BAAc,OAAd,EAAsB,OAAK,GAA3B;AACH,aAFD,EAEE,GAFF;AAGH;;;qCAEW;AACR,iBAAK,IAAL,CAAU,gBAAV,CAA2B,SAA3B,EAAqC,KAAK,WAA1C;AACH;;;;;;kBA7DgB,M;;;AAgErB,SAAS,yBAAT,GAAoC;AAChC,QAAM,MAAM,SAAS,aAAT,CAAuB,KAAvB,CAAZ;AACA,QAAI,SAAJ,GAAgB,QAAhB;AACA,QAAI,SAAJ,GAAgB,IAAhB;AACA,WAAO,GAAP;AACH;;AAED,SAAS,aAAT,CAAuB,GAAvB,EAA2B,aAA3B,EAAyC;AACrC,kBAAc,WAAd,CAA0B,GAA1B;AACA,UAAM,IAAN;AACH;;;;;;AC9ED,SAAS,QAAT,CAAkB,EAAlB,EAAqB,KAArB,EAA2B;AACvB,QAAI,YAAY,CAAhB;AACA,WAAO,YAAW;AACd,YAAI,UAAU,CAAC,IAAI,IAAJ,EAAf;AACA,YAAG,UAAU,SAAV,IAAuB,KAA1B,EAAgC;AAC5B;AACA,wBAAY,OAAZ;AACH;AACJ,KAND;AAOH;;QAGG,Q,GAAA,Q","file":"build","sourcesContent":["import {\r\n    throttle,\r\n} from \"./utils.js\";\r\n\r\nexport default class Praise{\r\n    constructor(box,palm,maxCount){\r\n        this.box = box;\r\n        this.palm = palm;\r\n        this.maxCount = maxCount;\r\n        this._praiseCount = 0;\r\n        this._init();\r\n        this.bindEvents();\r\n    }\r\n    \r\n    _init(){\r\n        this.bindEvents = this.bindEvents.bind(this)\r\n        this.clickHander = throttle(this.clickHander.bind(this),300);\r\n        this.callCollection = this.callCollection.bind(this)\r\n    }\r\n\r\n    count(){\r\n        ++this._praiseCount;\r\n        /**\r\n         * 数组第一项用来控制手掌是否置灰（1表示置灰，0表示不置灰）\r\n         * 数组第二项用来控制是否显示+1（1表示显示，0表示不显示）\r\n         */\r\n        if(this._praiseCount === this.maxCount){\r\n            this._praiseCount = 0;\r\n            return [1,1];\r\n        }\r\n\r\n        if(this._praiseCount > this.maxCount){\r\n            this._praiseCount = 0;\r\n            return [1,0];\r\n        }\r\n        console.log(this._praiseCount)\r\n        return [0,1];\r\n    }\r\n    \r\n    clickHander(e){\r\n        const [ _disableFlag, _countFlag] = this.count();\r\n        if(_disableFlag){\r\n            this.box.className = \"disable\";\r\n        }else{\r\n            this.box.className=\"\";\r\n        }\r\n\r\n        if(_countFlag){\r\n            const numberEle = createPraiseNumberElement();\r\n            this.box.appendChild(numberEle);\r\n            setTimeout(()=>{\r\n                numberEle.className = \"number number-move\";\r\n                this.callCollection(numberEle);\r\n            },50);\r\n        }\r\n    }\r\n\r\n    callCollection(element){\r\n        setTimeout(()=>{\r\n            removeElement(element,this.box);\r\n        },500)\r\n    }\r\n\r\n    bindEvents(){\r\n        this.palm.addEventListener(\"mouseup\",this.clickHander)\r\n    }\r\n}\r\n\r\nfunction createPraiseNumberElement(){\r\n    const box = document.createElement(\"div\");\r\n    box.className = \"number\";\r\n    box.innerHTML = \"+1\";\r\n    return box;\r\n}\r\n\r\nfunction removeElement(ele,parentElement){\r\n    parentElement.removeChild(ele);\r\n    ele = null;\r\n}\r\n\r\n","function throttle(fn,delay){\r\n    let startTime = 0;\r\n    return (...args)=>{\r\n        let timeNow = +new Date();\r\n        if(timeNow - startTime >= delay){\r\n            fn(...args);\r\n            startTime = timeNow;\r\n        }\r\n    }\r\n}\r\n\r\nexport {\r\n    throttle,\r\n}"]}