{"version":3,"sources":["../src/main.js"],"names":["Praise","box","palm","maxCount","_praiseCount","_init","bindEvents","bind","clickHander","callCollection","console","log","e","count","_disableFlag","_countFlag","className","numberEle","createPraiseNumberElement","appendChild","setTimeout","element","removeElement","addEventListener","document","createElement","innerHTML","ele","parentElement","removeChild"],"mappings":";;;;;;;;;;AAAA;;;;IAIqBA,M;AACjB,oBAAYC,GAAZ,EAAgBC,IAAhB,EAAqBC,QAArB,EAA8B;AAAA;;AAC1B,aAAKF,GAAL,GAAWA,GAAX;AACA,aAAKC,IAAL,GAAYA,IAAZ;AACA,aAAKC,QAAL,GAAgBA,QAAhB;AACA,aAAKC,YAAL,GAAoB,CAApB;AACA,aAAKC,KAAL;AACA,aAAKC,UAAL;AACH;;;;gCAEM;AACH,iBAAKA,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACA,iBAAKC,WAAL,GAAmB,qBAAS,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAT,EAAqC,GAArC,CAAnB;AACA,iBAAKE,cAAL,GAAsB,KAAKA,cAAL,CAAoBF,IAApB,CAAyB,IAAzB,CAAtB;AACH;;;gCAEM;AACH,cAAE,KAAKH,YAAP;AACA;;;;AAIA,gBAAG,KAAKA,YAAL,KAAsB,KAAKD,QAA9B,EAAuC;AACnC,qBAAKC,YAAL,GAAoB,CAApB;AACA,uBAAO,CAAC,CAAD,EAAG,CAAH,CAAP;AACH;;AAEDM,oBAAQC,GAAR,CAAY,KAAKP,YAAjB;AACA,mBAAO,CAAC,CAAD,EAAG,CAAH,CAAP;AACH;;;oCAEWQ,C,EAAE;AAAA;;AAAA,yBAC0B,KAAKC,KAAL,EAD1B;AAAA;AAAA,gBACFC,YADE;AAAA,gBACYC,UADZ;;AAEV,gBAAGD,YAAH,EAAgB;AACZ,qBAAKb,GAAL,CAASe,SAAT,GAAqB,SAArB;AACH,aAFD,MAEK;AACD,qBAAKf,GAAL,CAASe,SAAT,GAAmB,EAAnB;AACH;;AAED,gBAAGD,UAAH,EAAc;AACV,oBAAME,YAAYC,2BAAlB;AACA,qBAAKjB,GAAL,CAASkB,WAAT,CAAqBF,SAArB;AACAG,2BAAW,YAAI;AACXH,8BAAUD,SAAV,GAAsB,oBAAtB;AACA,0BAAKP,cAAL,CAAoBQ,SAApB;AACH,iBAHD,EAGE,EAHF;AAIH;AACJ;;;uCAEcI,O,EAAQ;AAAA;;AACnBD,uBAAW,YAAI;AACXE,8BAAcD,OAAd,EAAsB,OAAKpB,GAA3B;AACH,aAFD,EAEE,GAFF;AAGH;;;qCAEW;AACR,iBAAKC,IAAL,CAAUqB,gBAAV,CAA2B,SAA3B,EAAqC,KAAKf,WAA1C;AACH;;;;;;kBAzDgBR,M;;;AA4DrB,SAASkB,yBAAT,GAAoC;AAChC,QAAMjB,MAAMuB,SAASC,aAAT,CAAuB,KAAvB,CAAZ;AACAxB,QAAIe,SAAJ,GAAgB,QAAhB;AACAf,QAAIyB,SAAJ,GAAgB,IAAhB;AACA,WAAOzB,GAAP;AACH;;AAED,SAASqB,aAAT,CAAuBK,GAAvB,EAA2BC,aAA3B,EAAyC;AACrCA,kBAAcC,WAAd,CAA0BF,GAA1B;AACAA,UAAM,IAAN;AACH","file":"main.js","sourcesContent":["import {\r\n    throttle,\r\n} from \"./utils.js\";\r\n\r\nexport default class Praise{\r\n    constructor(box,palm,maxCount){\r\n        this.box = box;\r\n        this.palm = palm;\r\n        this.maxCount = maxCount;\r\n        this._praiseCount = 0;\r\n        this._init();\r\n        this.bindEvents();\r\n    }\r\n    \r\n    _init(){\r\n        this.bindEvents = this.bindEvents.bind(this)\r\n        this.clickHander = throttle(this.clickHander.bind(this),300);\r\n        this.callCollection = this.callCollection.bind(this)\r\n    }\r\n\r\n    count(){\r\n        ++this._praiseCount;\r\n        /**\r\n         * 数组第一项用来控制手掌是否置灰（1表示置灰，0表示不置灰）\r\n         * 数组第二项用来控制是否显示+1（1表示显示，0表示不显示）\r\n         */\r\n        if(this._praiseCount === this.maxCount){\r\n            this._praiseCount = 0;\r\n            return [1,1];\r\n        }\r\n\r\n        console.log(this._praiseCount)\r\n        return [0,1];\r\n    }\r\n    \r\n    clickHander(e){\r\n        const [ _disableFlag, _countFlag] = this.count();\r\n        if(_disableFlag){\r\n            this.box.className = \"disable\";\r\n        }else{\r\n            this.box.className=\"\";\r\n        }\r\n\r\n        if(_countFlag){\r\n            const numberEle = createPraiseNumberElement();\r\n            this.box.appendChild(numberEle);\r\n            setTimeout(()=>{\r\n                numberEle.className = \"number number-move\";\r\n                this.callCollection(numberEle);\r\n            },50);\r\n        }\r\n    }\r\n\r\n    callCollection(element){\r\n        setTimeout(()=>{\r\n            removeElement(element,this.box);\r\n        },500)\r\n    }\r\n\r\n    bindEvents(){\r\n        this.palm.addEventListener(\"mouseup\",this.clickHander)\r\n    }\r\n}\r\n\r\nfunction createPraiseNumberElement(){\r\n    const box = document.createElement(\"div\");\r\n    box.className = \"number\";\r\n    box.innerHTML = \"+1\";\r\n    return box;\r\n}\r\n\r\nfunction removeElement(ele,parentElement){\r\n    parentElement.removeChild(ele);\r\n    ele = null;\r\n}\r\n\r\n"]}